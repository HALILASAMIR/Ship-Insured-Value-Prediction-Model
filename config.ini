# Configuration File for Ship Value Prediction Model
# This file contains settings for data processing, model training, and deployment

# ============================================================================
# DATA CONFIGURATION
# ============================================================================

# Data file path
DATA_FILE = data_navire.csv
DATA_SEPARATOR = ;
DATA_ENCODING = utf-8

# Data preprocessing settings
RANDOM_SEED = 42
TEST_SIZE = 0.20  # 20% for testing, 80% for training
VALIDATION_SPLIT = 0.10  # For validation set

# Missing values handling
HANDLE_MISSING_VALUES = True
FILL_NUMERIC_STRATEGY = mean  # Options: mean, median, drop
FILL_CATEGORICAL_STRATEGY = mode  # Options: mode, drop

# Outlier detection
OUTLIER_DETECTION_METHOD = IQR  # Options: IQR, zscore, isolation_forest
OUTLIER_IQR_MULTIPLIER = 1.5
OUTLIER_CAP_VALUE = 10000  # For ratio_value_dwt

# Feature scaling
SCALE_FEATURES = False  # XGBoost doesn't require scaling
SCALER_TYPE = StandardScaler  # Options: StandardScaler, MinMaxScaler, RobustScaler

# ============================================================================
# FEATURE ENGINEERING
# ============================================================================

# Features to use for modeling
FEATURES = [
    AGE,
    DWT,
    GRT,
    Puissance_Moteur,
    TYPE_ENCODED,
    is_IACS,
    PAYS_ENC
]

# Target variable
TARGET_VARIABLE = Valeur_Assuree

# Target transformation
TARGET_TRANSFORM = log1p  # Options: log1p, sqrt, none
TARGET_INVERSE_TRANSFORM = expm1

# Feature encoding
ENCODE_CATEGORICAL = True
ENCODING_METHOD = LabelEncoder  # Options: LabelEncoder, OneHotEncoder

# IACS members list
IACS_MEMBERS = [ABS, BV, DNV, LR, NK, RINA, KR, CCS, RS, CRS, PRS]

# ============================================================================
# MODEL CONFIGURATION
# ============================================================================

# Primary model: XGBoost
MODEL_TYPE = xgboost
XGBOOST_PARAMS = {
    n_estimators: 1000,
    learning_rate: 0.03,
    max_depth: 6,
    subsample: 0.8,
    colsample_bytree: 0.8,
    objective: "reg:squarederror",
    random_state: 42,
    verbosity: 0
}

# Baseline model: Random Forest
RANDOM_FOREST_PARAMS = {
    n_estimators: 500,
    max_depth: 10,
    min_samples_split: 5,
    min_samples_leaf: 2,
    random_state: 42,
    n_jobs: -1
}

# ============================================================================
# TRAINING CONFIGURATION
# ============================================================================

# Cross-validation
CROSS_VALIDATION_FOLDS = 5
CROSS_VALIDATION_STRATEGY = KFold  # Options: KFold, StratifiedKFold, TimeSeriesSplit

# Early stopping (for boosting models)
EARLY_STOPPING_ROUNDS = 50
EARLY_STOPPING_METRIC = rmse

# Hyperparameter tuning
HYPERPARAMETER_TUNING = False
TUNING_STRATEGY = grid_search  # Options: grid_search, random_search, bayesian
TUNING_CV_FOLDS = 3

# ============================================================================
# EVALUATION METRICS
# ============================================================================

# Primary metrics
PRIMARY_METRIC = r2  # Options: r2, mae, rmse, mape
SECONDARY_METRICS = [mae, rmse, mape]

# Evaluation thresholds
MIN_R2_SCORE = 0.70
MAX_MAE = 2000000

# ============================================================================
# OUTPUT CONFIGURATION
# ============================================================================

# Output directories
OUTPUT_DIR = output
MODELS_DIR = models
VISUALIZATIONS_DIR = visualizations
LOGS_DIR = logs

# Model saving
SAVE_TRAINED_MODEL = True
MODEL_FORMAT = pkl  # Options: pkl, h5, onnx
MODEL_NAME_TEMPLATE = {model_type}_v{version}.{format}

# Results saving
SAVE_TRAINING_RESULTS = True
RESULTS_FORMAT = json
SAVE_PREDICTIONS = True

# Logging
LOGGING_LEVEL = INFO  # Options: DEBUG, INFO, WARNING, ERROR, CRITICAL
LOGGING_FILE = logs/training.log
LOG_TO_CONSOLE = True

# ============================================================================
# VISUALIZATION CONFIGURATION
# ============================================================================

# Plot settings
PLOT_DPI = 300
PLOT_FORMAT = png  # Options: png, jpg, pdf, svg
PLOT_STYLE = seaborn
FIGURE_SIZE = (12, 6)

# Generate plots during training
PLOT_FEATURE_IMPORTANCE = True
PLOT_RESIDUALS = True
PLOT_CORRELATION_MATRIX = True
PLOT_DISTRIBUTION = True
PLOT_MODEL_COMPARISON = True
PLOT_PDP = True

# ============================================================================
# DEPLOYMENT CONFIGURATION
# ============================================================================

# Model deployment
DEPLOY_MODEL = False
DEPLOYMENT_TYPE = flask  # Options: flask, fastapi, streamlit
DEPLOYMENT_HOST = 0.0.0.0
DEPLOYMENT_PORT = 5000

# API settings
API_VERSION = v1
API_MAX_BATCH_SIZE = 100
API_TIMEOUT_SECONDS = 30

# Input validation
VALIDATE_INPUTS = True
VALIDATE_RANGES = True
VALIDATE_TYPES = True

# ============================================================================
# MONITORING & MAINTENANCE
# ============================================================================

# Model monitoring
MONITOR_MODEL_PERFORMANCE = True
PERFORMANCE_DEGRADATION_THRESHOLD = 0.05  # 5% degradation triggers alert
RETRAIN_FREQUENCY_DAYS = 90

# Data drift detection
DETECT_DATA_DRIFT = True
DRIFT_DETECTION_METHOD = kolmogorov_smirnov

# Model versioning
VERSION_CONTROL = True
VERSION_COMPARISON = True

# ============================================================================
# ADVANCED SETTINGS
# ============================================================================

# Parallel processing
N_JOBS = -1  # -1 to use all available cores

# Memory management
BATCH_SIZE = 32  # For prediction batches
CACHE_RESULTS = False

# Debugging
DEBUG_MODE = False
VERBOSE = True
SAVE_INTERMEDIATE_DATA = False

# ============================================================================
# NOTES
# ============================================================================
# - Modify settings carefully, especially model parameters
# - Always backup original config before making changes
# - Test configuration changes on development environment first
# - Document any custom changes for reproducibility
# - For production deployment, use environment variables for sensitive info
